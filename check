#!/bin/bash

check() {
  if [ "$DEBUG" = "true" ]; then
    log::info "[DEBUG][service][workspace]: $SERVICE_CONFIG"
    cat $SERVICE_CONFIG
  fi

  config::check_or_set SERVICE_WIREGUARD_DATA_PORT text $SERVICE_CONFIG "SERVICE_WIREGUARD_DATA_PORT:" 51820
  config::check_or_set SERVICE_WIREGUARD_ADMIN_PORT text $SERVICE_CONFIG "SERVICE_WIREGUARD_ADMIN_PORT:" 51821
  config::check_or_set SERVICE_WIREGUARD_DEFAULT_ADDRESS text $SERVICE_CONFIG "SERVICE_WIREGUARD_DEFAULT_ADDRESS:" "10.8.0.x"

  # config::check_or_set SERVICE_WIREGUARD_HOST text $SERVICE_CONFIG "SERVICE_WIREGUARD_HOST:"
  config::check_or_set SERVICE_WIREGUARD_ADMIN_PASSWORD text $SERVICE_CONFIG "SERVICE_WIREGUARD_ADMIN_PASSWORD:"
}

check $@
